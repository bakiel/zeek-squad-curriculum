<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Living & Non-Living Things - Interactive Whiteboard</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&family=Nunito:wght@400;600;700;800;900&display=swap');

  :root {
    --green: #2ECC71;
    --green-dark: #27AE60;
    --green-light: #E8F8F0;
    --blue: #3498DB;
    --blue-dark: #2980B9;
    --blue-light: #EBF5FB;
    --orange: #F39C12;
    --orange-dark: #E67E22;
    --pink: #E74C8B;
    --purple: #9B59B6;
    --yellow: #F1C40F;
    --red: #E74C3C;
    --gray: #BDC3C7;
    --dark: #2C3E50;
    --bg: #FEFCF3;
    --card-shadow: 0 4px 15px rgba(0,0,0,0.08);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    min-height: 100vh;
    overflow-x: hidden;
    user-select: none;
    -webkit-user-select: none;
  }

  /* ===== HEADER ===== */
  .header {
    background: linear-gradient(135deg, var(--green) 0%, #58D68D 50%, var(--blue) 100%);
    padding: 18px 30px;
    text-align: center;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(46,204,113,0.3);
  }
  .header::before {
    content: '';
    position: absolute;
    top: -50%; left: -50%;
    width: 200%; height: 200%;
    background: radial-gradient(circle at 20% 50%, rgba(255,255,255,0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(255,255,255,0.1) 0%, transparent 50%);
    animation: shimmer 8s ease-in-out infinite;
  }
  @keyframes shimmer {
    0%, 100% { transform: translateX(-5%); }
    50% { transform: translateX(5%); }
  }
  .header h1 {
    font-family: 'Baloo 2', cursive;
    font-size: 2.4rem;
    color: white;
    text-shadow: 2px 3px 6px rgba(0,0,0,0.15);
    position: relative;
    letter-spacing: 1px;
  }
  .header p {
    color: rgba(255,255,255,0.92);
    font-size: 1rem;
    font-weight: 600;
    position: relative;
    margin-top: 2px;
  }

  /* ===== NAV TABS ===== */
  .nav-tabs {
    display: flex;
    justify-content: center;
    gap: 8px;
    padding: 14px 20px 0;
    background: white;
    border-bottom: 3px solid #f0f0f0;
    flex-wrap: wrap;
  }
  .nav-tab {
    padding: 10px 22px;
    border: none;
    background: #f5f5f5;
    border-radius: 20px 20px 0 0;
    font-family: 'Baloo 2', cursive;
    font-size: 1.05rem;
    font-weight: 700;
    color: #888;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    top: 3px;
  }
  .nav-tab:hover { background: #eee; color: #555; }
  .nav-tab.active {
    background: var(--bg);
    color: var(--dark);
    box-shadow: 0 -2px 8px rgba(0,0,0,0.06);
    top: 3px;
    border-bottom: 3px solid var(--bg);
  }
  .nav-tab.active[data-tab="learn"] { color: var(--green-dark); }
  .nav-tab.active[data-tab="sort"] { color: var(--orange-dark); }
  .nav-tab.active[data-tab="circle"] { color: var(--purple); }
  .nav-tab.active[data-tab="quiz"] { color: var(--blue-dark); }

  /* ===== SECTIONS ===== */
  .section { display: none; padding: 20px; max-width: 1100px; margin: 0 auto; }
  .section.active { display: block; animation: fadeSlide 0.4s ease; }
  @keyframes fadeSlide {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ===== LEARN SECTION ===== */
  .learn-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-top: 16px;
  }
  .info-card {
    border-radius: 20px;
    padding: 28px 24px;
    position: relative;
    overflow: hidden;
    box-shadow: var(--card-shadow);
    transition: transform 0.3s ease;
  }
  .info-card:hover { transform: translateY(-3px); }
  .info-card.living {
    background: linear-gradient(145deg, var(--green-light) 0%, #D5F5E3 100%);
    border: 3px solid var(--green);
  }
  .info-card.nonliving {
    background: linear-gradient(145deg, var(--blue-light) 0%, #D6EAF8 100%);
    border: 3px solid var(--blue);
  }
  .info-card h2 {
    font-family: 'Baloo 2', cursive;
    font-size: 1.7rem;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .info-card.living h2 { color: var(--green-dark); }
  .info-card.nonliving h2 { color: var(--blue-dark); }
  .info-card .emoji-icon { font-size: 1.8rem; }
  .info-card ul { list-style: none; padding: 0; }
  .info-card ul li {
    font-size: 1.15rem;
    font-weight: 600;
    color: var(--dark);
    padding: 8px 0;
    display: flex;
    align-items: center;
    gap: 10px;
    border-bottom: 1px dashed rgba(0,0,0,0.08);
  }
  .info-card ul li:last-child { border-bottom: none; }
  .info-card ul li .bullet {
    width: 28px; height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    flex-shrink: 0;
  }
  .living .bullet { background: var(--green); color: white; }
  .nonliving .bullet { background: var(--blue); color: white; }

  .examples-row {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-top: 20px;
    flex-wrap: wrap;
  }
  .example-card {
    background: white;
    border-radius: 16px;
    padding: 16px 12px;
    text-align: center;
    width: 110px;
    box-shadow: var(--card-shadow);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: default;
  }
  .example-card:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 8px 25px rgba(0,0,0,0.12);
  }
  .example-card .big-emoji { font-size: 2.8rem; display: block; margin-bottom: 6px; }
  .example-card .label {
    font-family: 'Baloo 2', cursive;
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--dark);
  }

  /* ===== SORT SECTION ===== */
  .sort-instruction {
    text-align: center;
    font-family: 'Baloo 2', cursive;
    font-size: 1.4rem;
    color: var(--dark);
    margin: 10px 0 20px;
  }
  .sort-instruction span { color: var(--orange); }

  .sort-area {
    display: grid;
    grid-template-columns: 1fr 280px 1fr;
    gap: 16px;
    align-items: start;
    min-height: 460px;
  }

  .drop-zone {
    min-height: 420px;
    border-radius: 24px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    position: relative;
  }
  .drop-zone.living-zone {
    background: linear-gradient(180deg, var(--green-light) 0%, #C8F7DC 100%);
    border: 3px dashed var(--green);
  }
  .drop-zone.nonliving-zone {
    background: linear-gradient(180deg, var(--blue-light) 0%, #BEE0F7 100%);
    border: 3px dashed var(--blue);
  }
  .drop-zone.drag-over {
    border-style: solid;
    transform: scale(1.02);
    box-shadow: 0 0 25px rgba(0,0,0,0.1);
  }
  .drop-zone.living-zone.drag-over { background: #B8F0D0; }
  .drop-zone.nonliving-zone.drag-over { background: #A8D8F0; }

  .drop-zone h3 {
    font-family: 'Baloo 2', cursive;
    font-size: 1.5rem;
    margin-bottom: 4px;
  }
  .drop-zone.living-zone h3 { color: var(--green-dark); }
  .drop-zone.nonliving-zone h3 { color: var(--blue-dark); }
  .drop-zone .zone-hint {
    font-size: 0.85rem;
    color: #999;
    font-weight: 600;
    margin-bottom: 6px;
  }

  .items-tray {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    padding-top: 10px;
  }
  .items-tray h3 {
    font-family: 'Baloo 2', cursive;
    font-size: 1.2rem;
    color: var(--orange);
    margin-bottom: 4px;
  }

  .drag-item {
    background: white;
    border: 3px solid #eee;
    border-radius: 16px;
    padding: 10px 14px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: grab;
    transition: all 0.2s ease;
    box-shadow: 0 3px 10px rgba(0,0,0,0.07);
    width: 200px;
    font-weight: 700;
    font-size: 1.05rem;
    color: var(--dark);
  }
  .drag-item:active { cursor: grabbing; }
  .drag-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    border-color: var(--orange);
  }
  .drag-item .item-emoji { font-size: 1.8rem; }
  .drag-item.correct {
    border-color: var(--green) !important;
    background: #E8FFF0;
    animation: popCorrect 0.4s ease;
  }
  .drag-item.wrong {
    border-color: var(--red) !important;
    background: #FFF0F0;
    animation: shake 0.5s ease;
  }
  @keyframes popCorrect {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-8px); }
    40% { transform: translateX(8px); }
    60% { transform: translateX(-5px); }
    80% { transform: translateX(5px); }
  }

  .sort-score {
    text-align: center;
    margin-top: 16px;
    font-family: 'Baloo 2', cursive;
    font-size: 1.3rem;
    color: var(--dark);
  }
  .sort-score .score-num { color: var(--green); font-size: 1.6rem; }

  /* ===== CIRCLE SECTION ===== */
  .circle-instruction {
    text-align: center;
    font-family: 'Baloo 2', cursive;
    font-size: 1.4rem;
    color: var(--dark);
    margin: 10px 0 20px;
  }
  .circle-instruction span { color: var(--purple); }

  .circle-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 18px;
    max-width: 800px;
    margin: 0 auto;
  }
  .circle-card {
    background: white;
    border-radius: 20px;
    padding: 20px 12px;
    text-align: center;
    box-shadow: var(--card-shadow);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 4px solid transparent;
    position: relative;
  }
  .circle-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.12);
  }
  .circle-card .card-emoji { font-size: 3.5rem; display: block; margin-bottom: 8px; }
  .circle-card .card-label {
    font-family: 'Baloo 2', cursive;
    font-size: 1.1rem;
    color: var(--dark);
  }
  .circle-card.selected {
    border-color: var(--green);
    background: var(--green-light);
    box-shadow: 0 0 0 4px rgba(46,204,113,0.2);
  }
  .circle-card.selected::after {
    content: '\2713';
    position: absolute;
    top: 8px; right: 10px;
    background: var(--green);
    color: white;
    width: 26px; height: 26px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    font-weight: 800;
    animation: popIn 0.3s ease;
  }
  .circle-card.wrong-select {
    border-color: var(--red);
    background: #FFF5F5;
    animation: shake 0.5s ease;
  }
  @keyframes popIn {
    from { transform: scale(0); }
    to { transform: scale(1); }
  }

  .circle-score {
    text-align: center;
    margin-top: 20px;
  }

  /* ===== QUIZ SECTION ===== */
  .quiz-instruction {
    text-align: center;
    font-family: 'Baloo 2', cursive;
    font-size: 1.4rem;
    color: var(--dark);
    margin: 10px 0 20px;
  }
  .quiz-instruction span { color: var(--blue-dark); }

  .quiz-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 750px;
    margin: 0 auto;
  }
  .quiz-row {
    background: white;
    border-radius: 16px;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 14px;
    box-shadow: var(--card-shadow);
    transition: all 0.3s ease;
  }
  .quiz-row:hover { box-shadow: 0 6px 20px rgba(0,0,0,0.1); }
  .quiz-num {
    width: 34px; height: 34px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Baloo 2', cursive;
    font-weight: 800;
    font-size: 1rem;
    color: white;
    flex-shrink: 0;
  }
  .quiz-row .quiz-text {
    flex: 1;
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--dark);
  }
  .quiz-btns {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
  }
  .quiz-btn {
    padding: 8px 18px;
    border: 3px solid #ddd;
    border-radius: 12px;
    background: white;
    font-family: 'Baloo 2', cursive;
    font-size: 0.95rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #888;
  }
  .quiz-btn:hover { border-color: #bbb; background: #fafafa; }
  .quiz-btn.living-btn:hover { border-color: var(--green); color: var(--green-dark); }
  .quiz-btn.nonliving-btn:hover { border-color: var(--blue); color: var(--blue-dark); }
  .quiz-btn.chosen-correct {
    border-color: var(--green);
    background: var(--green-light);
    color: var(--green-dark);
    animation: popCorrect 0.3s ease;
  }
  .quiz-btn.chosen-wrong {
    border-color: var(--red);
    background: #FFF0F0;
    color: var(--red);
    animation: shake 0.4s ease;
  }
  .quiz-btn.disabled { pointer-events: none; opacity: 0.5; }

  .quiz-row.answered-correct { border-left: 5px solid var(--green); }
  .quiz-row.answered-wrong { border-left: 5px solid var(--red); }

  /* ===== SHARED ELEMENTS ===== */
  .check-btn {
    display: block;
    margin: 20px auto 0;
    padding: 14px 40px;
    border: none;
    border-radius: 50px;
    font-family: 'Baloo 2', cursive;
    font-size: 1.2rem;
    font-weight: 700;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
  }
  .check-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
  .check-btn:active { transform: translateY(0); }
  .check-btn.green { background: linear-gradient(135deg, var(--green), #58D68D); }
  .check-btn.purple { background: linear-gradient(135deg, var(--purple), #BB8FCE); }
  .check-btn.orange { background: linear-gradient(135deg, var(--orange), #F5B041); }
  .check-btn.blue { background: linear-gradient(135deg, var(--blue), #5DADE2); }

  .reset-btn {
    display: block;
    margin: 10px auto 0;
    padding: 8px 24px;
    border: 2px solid #ddd;
    border-radius: 50px;
    background: white;
    font-family: 'Baloo 2', cursive;
    font-size: 1rem;
    color: #999;
    cursor: pointer;
    transition: all 0.2s;
  }
  .reset-btn:hover { border-color: #bbb; color: #666; background: #fafafa; }

  .result-banner {
    text-align: center;
    font-family: 'Baloo 2', cursive;
    font-size: 1.5rem;
    padding: 14px;
    border-radius: 16px;
    margin-top: 16px;
    display: none;
  }
  .result-banner.show { display: block; animation: fadeSlide 0.4s ease; }
  .result-banner.perfect { background: #E8FFF0; color: var(--green-dark); border: 2px solid var(--green); }
  .result-banner.good { background: #FFF8E1; color: var(--orange-dark); border: 2px solid var(--orange); }
  .result-banner.try-again { background: #FFF0F0; color: var(--red); border: 2px solid var(--red); }

  /* ===== CONFETTI ===== */
  .confetti-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 1000;
    overflow: hidden;
  }
  .confetti-piece {
    position: absolute;
    width: 10px; height: 10px;
    top: -20px;
    animation: confettiFall 3s ease-out forwards;
  }
  @keyframes confettiFall {
    0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg) scale(0.5); opacity: 0; }
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 850px) {
    .learn-grid { grid-template-columns: 1fr; }
    .sort-area { grid-template-columns: 1fr; }
    .sort-area .drop-zone { min-height: 120px; }
    .circle-grid { grid-template-columns: repeat(3, 1fr); }
    .header h1 { font-size: 1.8rem; }
  }
  @media (max-width: 550px) {
    .circle-grid { grid-template-columns: repeat(2, 1fr); }
    .quiz-row { flex-wrap: wrap; }
    .nav-tab { font-size: 0.9rem; padding: 8px 14px; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <h1>üåø Living & Non-Living Things ü™®</h1>
  <p>Interactive Whiteboard Activity ‚Äî Kindergarten Science</p>
</div>

<!-- NAV -->
<div class="nav-tabs">
  <button class="nav-tab active" data-tab="learn" onclick="switchTab('learn')">üìñ Learn</button>
  <button class="nav-tab" data-tab="sort" onclick="switchTab('sort')">üéØ Sort It!</button>
  <button class="nav-tab" data-tab="circle" onclick="switchTab('circle')">‚≠ï Circle It!</button>
  <button class="nav-tab" data-tab="quiz" onclick="switchTab('quiz')">‚úÖ Quiz</button>
</div>

<!-- ==================== LEARN ==================== -->
<div class="section active" id="section-learn">
  <div class="learn-grid">
    <div class="info-card living">
      <h2><span class="emoji-icon">üå±</span> Living Things</h2>
      <ul>
        <li><span class="bullet">üå±</span> They <strong>grow</strong> bigger</li>
        <li><span class="bullet">üçé</span> They need <strong>food & water</strong></li>
        <li><span class="bullet">üèÉ</span> They can <strong>move</strong></li>
        <li><span class="bullet">üí®</span> They <strong>breathe</strong> air</li>
        <li><span class="bullet">üë∂</span> They can <strong>have babies</strong></li>
      </ul>
    </div>
    <div class="info-card nonliving">
      <h2><span class="emoji-icon">ü™®</span> Non-Living Things</h2>
      <ul>
        <li><span class="bullet">üö´</span> They do <strong>NOT</strong> grow</li>
        <li><span class="bullet">üö´</span> They do <strong>NOT</strong> need food</li>
        <li><span class="bullet">üö´</span> They do <strong>NOT</strong> move on their own</li>
        <li><span class="bullet">üö´</span> They do <strong>NOT</strong> breathe</li>
        <li><span class="bullet">üö´</span> They do <strong>NOT</strong> have babies</li>
      </ul>
    </div>
  </div>

  <h3 style="text-align:center; font-family:'Baloo 2',cursive; font-size:1.3rem; color:var(--dark); margin-top:24px;">
    üåç Examples of Living Things
  </h3>
  <div class="examples-row">
    <div class="example-card"><span class="big-emoji">üêï</span><span class="label">Dog</span></div>
    <div class="example-card"><span class="big-emoji">üåª</span><span class="label">Flower</span></div>
    <div class="example-card"><span class="big-emoji">üêü</span><span class="label">Fish</span></div>
    <div class="example-card"><span class="big-emoji">üå≥</span><span class="label">Tree</span></div>
    <div class="example-card"><span class="big-emoji">ü¶ã</span><span class="label">Butterfly</span></div>
    <div class="example-card"><span class="big-emoji">üê¶</span><span class="label">Bird</span></div>
  </div>

  <h3 style="text-align:center; font-family:'Baloo 2',cursive; font-size:1.3rem; color:var(--dark); margin-top:20px;">
    üè† Examples of Non-Living Things
  </h3>
  <div class="examples-row">
    <div class="example-card"><span class="big-emoji">ü™®</span><span class="label">Rock</span></div>
    <div class="example-card"><span class="big-emoji">üìö</span><span class="label">Book</span></div>
    <div class="example-card"><span class="big-emoji">üöó</span><span class="label">Car</span></div>
    <div class="example-card"><span class="big-emoji">‚öΩ</span><span class="label">Ball</span></div>
    <div class="example-card"><span class="big-emoji">ü•§</span><span class="label">Cup</span></div>
    <div class="example-card"><span class="big-emoji">‚úèÔ∏è</span><span class="label">Pencil</span></div>
  </div>
</div>

<!-- ==================== SORT ==================== -->
<div class="section" id="section-sort">
  <p class="sort-instruction">
    <span>üéØ Drag</span> each item into the correct group!
  </p>
  <div class="sort-area">
    <!-- Living Drop Zone -->
    <div class="drop-zone living-zone" id="living-zone"
         ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, 'living')">
      <h3>üå± Living</h3>
      <p class="zone-hint">Drop living things here</p>
    </div>

    <!-- Items Tray -->
    <div class="items-tray" id="items-tray">
      <h3>üéí Items</h3>
    </div>

    <!-- Non-Living Drop Zone -->
    <div class="drop-zone nonliving-zone" id="nonliving-zone"
         ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, 'nonliving')">
      <h3>ü™® Non-Living</h3>
      <p class="zone-hint">Drop non-living things here</p>
    </div>
  </div>

  <div class="sort-score" id="sort-score"></div>
  <div class="result-banner" id="sort-result"></div>
  <button class="reset-btn" onclick="resetSort()">üîÑ Reset</button>
</div>

<!-- ==================== CIRCLE ==================== -->
<div class="section" id="section-circle">
  <p class="circle-instruction">
    <span>‚≠ï Tap</span> on every <strong>living thing</strong> to circle it!
  </p>
  <div class="circle-grid" id="circle-grid"></div>
  <button class="check-btn purple" onclick="checkCircle()">‚ú® Check My Answers!</button>
  <div class="result-banner" id="circle-result"></div>
  <button class="reset-btn" onclick="resetCircle()">üîÑ Reset</button>
</div>

<!-- ==================== QUIZ ==================== -->
<div class="section" id="section-quiz">
  <p class="quiz-instruction">
    <span>‚úÖ Read</span> each sentence and choose <strong>Living</strong> or <strong>Non-Living</strong>!
  </p>
  <div class="quiz-list" id="quiz-list"></div>
  <div class="quiz-score" style="text-align:center; margin-top:16px;">
    <div class="result-banner" id="quiz-result"></div>
  </div>
  <button class="reset-btn" onclick="resetQuiz()">üîÑ Reset</button>
</div>

<!-- CONFETTI -->
<div class="confetti-container" id="confetti-container"></div>

<script>
// ===== TAB SWITCHING =====
function switchTab(tab) {
  document.querySelectorAll('.nav-tab').forEach(function(t) { t.classList.remove('active'); });
  document.querySelectorAll('.section').forEach(function(s) { s.classList.remove('active'); });
  document.querySelector('.nav-tab[data-tab="' + tab + '"]').classList.add('active');
  document.getElementById('section-' + tab).classList.add('active');
}

// ===== SORT ACTIVITY =====
var sortItems = [
  { name: 'Dog', emoji: 'üêï', type: 'living' },
  { name: 'Book', emoji: 'üìö', type: 'nonliving' },
  { name: 'Fish', emoji: 'üêü', type: 'living' },
  { name: 'Car', emoji: 'üöó', type: 'nonliving' },
  { name: 'Tree', emoji: 'üå≥', type: 'living' },
  { name: 'Ball', emoji: '‚öΩ', type: 'nonliving' },
  { name: 'Flower', emoji: 'üåª', type: 'living' },
  { name: 'Rock', emoji: 'ü™®', type: 'nonliving' },
  { name: 'Bird', emoji: 'üê¶', type: 'living' },
  { name: 'Cup', emoji: 'ü•§', type: 'nonliving' }
];

var sortCorrect = 0;
var sortTotal = 0;

function shuffle(arr) {
  var a = arr.slice();
  for (var i = a.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var temp = a[i];
    a[i] = a[j];
    a[j] = temp;
  }
  return a;
}

function buildSortItems() {
  var tray = document.getElementById('items-tray');
  tray.textContent = '';
  var h3 = document.createElement('h3');
  h3.textContent = 'üéí Items';
  tray.appendChild(h3);

  sortCorrect = 0; sortTotal = 0;
  document.getElementById('sort-score').textContent = '';
  var banner = document.getElementById('sort-result');
  banner.className = 'result-banner';
  banner.style.display = 'none';

  // Clear zones
  document.querySelectorAll('.drop-zone .drag-item').forEach(function(el) { el.remove(); });

  var shuffled = shuffle(sortItems);
  shuffled.forEach(function(item, i) {
    var el = document.createElement('div');
    el.className = 'drag-item';
    el.draggable = true;
    el.id = 'sort-item-' + i;
    el.dataset.type = item.type;
    el.dataset.name = item.name;

    var emojiSpan = document.createElement('span');
    emojiSpan.className = 'item-emoji';
    emojiSpan.textContent = item.emoji;
    el.appendChild(emojiSpan);
    el.appendChild(document.createTextNode(item.name));

    el.addEventListener('dragstart', function(e) {
      e.dataTransfer.setData('text/plain', el.id);
      el.style.opacity = '0.5';
    });
    el.addEventListener('dragend', function() { el.style.opacity = '1'; });
    // Touch support
    el.addEventListener('touchstart', handleTouchStart, { passive: false });
    el.addEventListener('touchmove', handleTouchMove, { passive: false });
    el.addEventListener('touchend', handleTouchEnd, { passive: false });
    tray.appendChild(el);
  });
}

function handleDragOver(e) {
  e.preventDefault();
  e.currentTarget.classList.add('drag-over');
}
function handleDragLeave(e) {
  e.currentTarget.classList.remove('drag-over');
}
function handleDrop(e, zoneType) {
  e.preventDefault();
  e.currentTarget.classList.remove('drag-over');
  var id = e.dataTransfer.getData('text/plain');
  var item = document.getElementById(id);
  if (!item) return;
  var correct = item.dataset.type === zoneType;
  sortTotal++;
  if (correct) {
    sortCorrect++;
    item.classList.add('correct');
    item.draggable = false;
    e.currentTarget.appendChild(item);
    if (sortCorrect === sortItems.length) showSortResult();
  } else {
    item.classList.add('wrong');
    setTimeout(function() { item.classList.remove('wrong'); }, 600);
  }
  updateSortScore();
}

// Touch drag support
var touchItem = null;
var touchClone = null;

function handleTouchStart(e) {
  e.preventDefault();
  touchItem = e.currentTarget;
  var touch = e.touches[0];
  touchClone = touchItem.cloneNode(true);
  touchClone.style.position = 'fixed';
  touchClone.style.zIndex = '9999';
  touchClone.style.pointerEvents = 'none';
  touchClone.style.opacity = '0.85';
  touchClone.style.transform = 'scale(1.08)';
  touchClone.style.width = touchItem.offsetWidth + 'px';
  document.body.appendChild(touchClone);
  moveTouchClone(touch);
  touchItem.style.opacity = '0.4';
}

function handleTouchMove(e) {
  e.preventDefault();
  if (touchClone) moveTouchClone(e.touches[0]);
}

function moveTouchClone(touch) {
  touchClone.style.left = (touch.clientX - touchClone.offsetWidth / 2) + 'px';
  touchClone.style.top = (touch.clientY - touchClone.offsetHeight / 2) + 'px';
}

function handleTouchEnd(e) {
  if (!touchItem || !touchClone) return;
  var touch = e.changedTouches[0];
  touchClone.remove();
  touchClone = null;
  touchItem.style.opacity = '1';

  var dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
  var zone = dropTarget ? dropTarget.closest('.drop-zone') : null;
  if (zone) {
    var zoneType = zone.id === 'living-zone' ? 'living' : 'nonliving';
    var correct = touchItem.dataset.type === zoneType;
    sortTotal++;
    if (correct) {
      sortCorrect++;
      touchItem.classList.add('correct');
      touchItem.draggable = false;
      zone.appendChild(touchItem);
      if (sortCorrect === sortItems.length) showSortResult();
    } else {
      touchItem.classList.add('wrong');
      setTimeout(function() { touchItem.classList.remove('wrong'); }, 600);
    }
    updateSortScore();
  }
  touchItem = null;
}

function updateSortScore() {
  document.getElementById('sort-score').innerHTML =
    'Score: <span class="score-num">' + sortCorrect + '</span> / ' + sortItems.length;
}

function showSortResult() {
  var banner = document.getElementById('sort-result');
  if (sortTotal === sortItems.length) {
    banner.textContent = 'üéâ Perfect! You sorted everything on the first try!';
    banner.className = 'result-banner perfect show';
    fireConfetti();
  } else {
    banner.textContent = '‚≠ê Great job! You sorted them all!';
    banner.className = 'result-banner good show';
    fireConfetti();
  }
}

function resetSort() { buildSortItems(); }

// ===== CIRCLE ACTIVITY =====
var circleItems = [
  { name: 'Sun', emoji: '‚òÄÔ∏è', living: false },
  { name: 'Flower', emoji: 'üåª', living: true },
  { name: 'Car', emoji: 'üöó', living: false },
  { name: 'Butterfly', emoji: 'ü¶ã', living: true },
  { name: 'Rock', emoji: 'ü™®', living: false },
  { name: 'Bird', emoji: 'üê¶', living: true },
  { name: 'Chair', emoji: 'ü™ë', living: false },
  { name: 'Cat', emoji: 'üê±', living: true },
  { name: 'Pencil', emoji: '‚úèÔ∏è', living: false },
  { name: 'Frog', emoji: 'üê∏', living: true },
  { name: 'Shoe', emoji: 'üëü', living: false },
  { name: 'Bee', emoji: 'üêù', living: true }
];

function buildCircle() {
  var grid = document.getElementById('circle-grid');
  grid.textContent = '';
  var banner = document.getElementById('circle-result');
  banner.className = 'result-banner';
  banner.style.display = 'none';

  var shuffled = shuffle(circleItems);
  shuffled.forEach(function(item, i) {
    var card = document.createElement('div');
    card.className = 'circle-card';
    card.dataset.living = item.living;
    card.dataset.index = i;

    var emojiSpan = document.createElement('span');
    emojiSpan.className = 'card-emoji';
    emojiSpan.textContent = item.emoji;
    card.appendChild(emojiSpan);

    var labelSpan = document.createElement('span');
    labelSpan.className = 'card-label';
    labelSpan.textContent = item.name;
    card.appendChild(labelSpan);

    card.onclick = function() {
      card.classList.toggle('selected');
      card.classList.remove('wrong-select');
    };
    grid.appendChild(card);
  });
}

function checkCircle() {
  var cards = document.querySelectorAll('.circle-card');
  var correct = 0;
  var total = circleItems.filter(function(i) { return i.living; }).length;

  cards.forEach(function(card) {
    var isLiving = card.dataset.living === 'true';
    var isSelected = card.classList.contains('selected');
    card.classList.remove('wrong-select');

    if (isLiving && isSelected) {
      correct++;
      card.classList.add('selected');
    } else if (!isLiving && isSelected) {
      card.classList.remove('selected');
      card.classList.add('wrong-select');
      setTimeout(function() { card.classList.remove('wrong-select'); }, 1200);
    }
  });

  var banner = document.getElementById('circle-result');
  var falsePositives = document.querySelectorAll('.circle-card.selected[data-living="false"]').length;

  if (correct === total && falsePositives === 0) {
    banner.textContent = 'üéâ Perfect! You found all ' + total + ' living things!';
    banner.className = 'result-banner perfect show';
    fireConfetti();
  } else if (correct > 0) {
    banner.textContent = '‚≠ê You found ' + correct + ' out of ' + total + ' living things. Keep trying!';
    banner.className = 'result-banner good show';
  } else {
    banner.textContent = 'ü§î Tap on the things that are alive ‚Äî they grow, breathe, and move!';
    banner.className = 'result-banner try-again show';
  }
}

function resetCircle() { buildCircle(); }

// ===== QUIZ ACTIVITY =====
var quizQuestions = [
  { text: 'A dog can run and play.', answer: 'living' },
  { text: 'A chair stays in one place.', answer: 'nonliving' },
  { text: 'A tree needs water to grow.', answer: 'living' },
  { text: 'A toy car does not eat food.', answer: 'nonliving' },
  { text: 'A flower grows from a seed.', answer: 'living' },
  { text: 'A pencil does not breathe.', answer: 'nonliving' },
  { text: 'A fish swims in water.', answer: 'living' },
  { text: 'A ball does not grow bigger.', answer: 'nonliving' },
  { text: 'A bird builds a nest for babies.', answer: 'living' },
  { text: 'A book does not need food.', answer: 'nonliving' }
];

var quizScore = 0;
var quizAnswered = 0;

function buildQuiz() {
  var list = document.getElementById('quiz-list');
  list.textContent = '';
  quizScore = 0;
  quizAnswered = 0;
  var banner = document.getElementById('quiz-result');
  banner.className = 'result-banner';
  banner.style.display = 'none';

  quizQuestions.forEach(function(q, i) {
    var row = document.createElement('div');
    row.className = 'quiz-row';
    row.id = 'quiz-row-' + i;

    var numSpan = document.createElement('span');
    numSpan.className = 'quiz-num';
    numSpan.style.background = i % 2 === 0 ? 'var(--green)' : 'var(--blue)';
    numSpan.textContent = i + 1;
    row.appendChild(numSpan);

    var textSpan = document.createElement('span');
    textSpan.className = 'quiz-text';
    textSpan.textContent = q.text;
    row.appendChild(textSpan);

    var btnsDiv = document.createElement('div');
    btnsDiv.className = 'quiz-btns';

    var livingBtn = document.createElement('button');
    livingBtn.className = 'quiz-btn living-btn';
    livingBtn.textContent = 'üå± Living';
    livingBtn.onclick = function() { answerQuiz(i, 'living', livingBtn); };
    btnsDiv.appendChild(livingBtn);

    var nonlivingBtn = document.createElement('button');
    nonlivingBtn.className = 'quiz-btn nonliving-btn';
    nonlivingBtn.textContent = 'ü™® Non-Living';
    nonlivingBtn.onclick = function() { answerQuiz(i, 'nonliving', nonlivingBtn); };
    btnsDiv.appendChild(nonlivingBtn);

    row.appendChild(btnsDiv);
    list.appendChild(row);
  });
}

function answerQuiz(index, choice, btn) {
  var row = document.getElementById('quiz-row-' + index);
  if (row.classList.contains('answered-correct') || row.classList.contains('answered-wrong')) return;

  var correct = quizQuestions[index].answer === choice;
  var btns = row.querySelectorAll('.quiz-btn');
  quizAnswered++;

  if (correct) {
    quizScore++;
    btn.classList.add('chosen-correct');
    row.classList.add('answered-correct');
    btns.forEach(function(b) { if (b !== btn) b.classList.add('disabled'); });
  } else {
    btn.classList.add('chosen-wrong');
    row.classList.add('answered-wrong');
    // Highlight correct answer
    btns.forEach(function(b) {
      if (b !== btn) {
        b.classList.add('chosen-correct');
      }
    });
  }

  if (quizAnswered === quizQuestions.length) {
    var banner = document.getElementById('quiz-result');
    if (quizScore === quizQuestions.length) {
      banner.textContent = 'üéâ Perfect Score! ' + quizScore + '/' + quizQuestions.length + ' ‚Äî You are a science star!';
      banner.className = 'result-banner perfect show';
      fireConfetti();
    } else if (quizScore >= quizQuestions.length * 0.7) {
      banner.textContent = '‚≠ê Great Job! ' + quizScore + '/' + quizQuestions.length + ' correct!';
      banner.className = 'result-banner good show';
    } else {
      banner.textContent = 'üí™ Good try! ' + quizScore + '/' + quizQuestions.length + '. Let us review and try again!';
      banner.className = 'result-banner try-again show';
    }
  }
}

function resetQuiz() { buildQuiz(); }

// ===== CONFETTI =====
function fireConfetti() {
  var container = document.getElementById('confetti-container');
  var colors = ['#2ECC71','#3498DB','#F39C12','#E74C8B','#9B59B6','#F1C40F','#E74C3C'];
  for (var i = 0; i < 60; i++) {
    var piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + '%';
    piece.style.background = colors[Math.floor(Math.random() * colors.length)];
    piece.style.animationDelay = Math.random() * 0.8 + 's';
    piece.style.animationDuration = (2 + Math.random() * 2) + 's';
    piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    piece.style.width = (6 + Math.random() * 8) + 'px';
    piece.style.height = (6 + Math.random() * 8) + 'px';
    container.appendChild(piece);
    setTimeout(function(p) { return function() { p.remove(); }; }(piece), 4000);
  }
}

// ===== INIT =====
buildSortItems();
buildCircle();
buildQuiz();
</script>
</body>
</html>
