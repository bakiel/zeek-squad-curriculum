<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solids & Liquids - Zeek Squad</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e1bee7 0%, #ce93d8 50%, #ba68c8 100%);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 100px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.2em;
            color: #6a1b9a;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .mascot-container {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .mascot {
            font-size: 80px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .speech-bubble {
            background: white;
            padding: 15px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 280px;
            position: relative;
            font-size: 1.1em;
            color: #333;
        }

        .speech-bubble:before {
            content: '';
            position: absolute;
            left: -15px;
            top: 20px;
            border-width: 10px;
            border-style: solid;
            border-color: transparent white transparent transparent;
        }

        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 25px;
            background: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9c27b0, #e91e63);
            border-radius: 12px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .stars {
            display: flex;
            gap: 5px;
            justify-content: center;
            font-size: 1.5em;
        }

        .star {
            opacity: 0.3;
            transition: all 0.3s ease;
        }

        .star.earned {
            opacity: 1;
            animation: starPop 0.5s ease;
        }

        @keyframes starPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .game-container {
            background: white;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            margin-bottom: 20px;
        }

        .activity-title {
            font-size: 1.5em;
            color: #6a1b9a;
            text-align: center;
            margin-bottom: 20px;
        }

        .concept-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .concept-card {
            border-radius: 20px;
            padding: 20px;
            text-align: center;
        }

        .concept-card.solid {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }

        .concept-card.liquid {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }

        .concept-card .icon {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .concept-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .concept-card.solid h3 {
            color: #e65100;
        }

        .concept-card.liquid h3 {
            color: #1565c0;
        }

        .concept-card p {
            font-size: 1em;
            color: #666;
        }

        .examples-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .example-item {
            font-size: 2em;
        }

        .sort-area {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .sort-bin {
            border: 4px dashed;
            border-radius: 20px;
            padding: 20px;
            min-height: 200px;
            text-align: center;
        }

        .sort-bin.solid {
            border-color: #ff9800;
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
        }

        .sort-bin.liquid {
            border-color: #2196f3;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }

        .sort-bin h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .sort-bin.solid h3 {
            color: #e65100;
        }

        .sort-bin.liquid h3 {
            color: #1565c0;
        }

        .sort-bin-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            min-height: 80px;
        }

        .items-to-sort {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .sort-item {
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid transparent;
        }

        .sort-item:hover {
            transform: scale(1.1);
        }

        .sort-item.selected {
            border-color: #9c27b0;
            box-shadow: 0 0 20px rgba(156, 39, 176, 0.4);
        }

        .sort-item .emoji {
            font-size: 2.5em;
        }

        .sort-item .name {
            font-size: 0.8em;
            color: #666;
            margin-top: 5px;
        }

        .sorted-item {
            padding: 8px 12px;
            background: white;
            border-radius: 10px;
            font-size: 1.5em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .quiz-container {
            text-align: center;
        }

        .quiz-item {
            font-size: 6em;
            margin: 20px 0;
        }

        .quiz-question {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 25px;
        }

        .quiz-options {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .quiz-btn {
            padding: 20px 40px;
            font-size: 1.3em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-btn.solid {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
        }

        .quiz-btn.liquid {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            color: white;
        }

        .quiz-btn:hover {
            transform: scale(1.1);
        }

        .quiz-btn.correct {
            animation: correctPop 0.5s ease;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        }

        .quiz-btn.wrong {
            animation: shake 0.5s ease;
            opacity: 0.5;
        }

        @keyframes correctPop {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .property-demo {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .property-title {
            font-size: 1.3em;
            color: #6a1b9a;
            margin-bottom: 15px;
        }

        .demo-visual {
            display: flex;
            justify-content: center;
            gap: 30px;
            align-items: center;
            flex-wrap: wrap;
        }

        .demo-box {
            text-align: center;
        }

        .demo-box .visual {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .demo-box .label {
            font-size: 1.1em;
            color: #666;
        }

        .next-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 20px auto 0;
            padding: 15px 30px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #9c27b0, #e91e63);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.4);
        }

        .next-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .celebration.show {
            opacity: 1;
            pointer-events: auto;
        }

        .celebration-content {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            transform: scale(0);
            transition: transform 0.5s ease;
        }

        .celebration.show .celebration-content {
            transform: scale(1);
        }

        .celebration h2 {
            font-size: 2em;
            color: #6a1b9a;
            margin-bottom: 20px;
        }

        .celebration .trophy {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #9c27b0;
            animation: fall 3s linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .hidden {
            display: none !important;
        }

        .feedback {
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .feedback.success {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .feedback.error {
            background: #ffcdd2;
            color: #c62828;
        }

        .counter {
            text-align: center;
            color: #666;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.6em;
            }

            .mascot {
                font-size: 60px;
            }

            .speech-bubble {
                font-size: 0.95em;
                padding: 12px 15px;
            }

            .concept-cards {
                grid-template-columns: 1fr;
            }

            .sort-area {
                grid-template-columns: 1fr;
            }

            .sort-item {
                width: 65px;
                height: 65px;
            }

            .sort-item .emoji {
                font-size: 2em;
            }

            .quiz-options {
                flex-direction: column;
                gap: 15px;
            }

            .quiz-item {
                font-size: 4em;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Solids & Liquids</h1>
    </div>

    <div class="mascot-container">
        <div class="mascot">üß™</div>
        <div class="speech-bubble" id="mascotSpeech">
            Hi scientist! I'm Professor Flask! Let's explore solids and liquids today! Everything around us is made of matter!
        </div>
    </div>

    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="stars" id="stars">
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
        </div>
    </div>

    <div class="game-container" id="activity1">
        <div class="activity-title">What are Solids and Liquids?</div>

        <div class="concept-cards">
            <div class="concept-card solid">
                <div class="icon">üß±</div>
                <h3>SOLIDS</h3>
                <p>Keep their shape! You can hold them.</p>
                <div class="examples-row">
                    <span class="example-item">ü™®</span>
                    <span class="example-item">üìö</span>
                    <span class="example-item">üßä</span>
                </div>
            </div>
            <div class="concept-card liquid">
                <div class="icon">üíß</div>
                <h3>LIQUIDS</h3>
                <p>Flow and take the shape of their container!</p>
                <div class="examples-row">
                    <span class="example-item">ü•õ</span>
                    <span class="example-item">üßÉ</span>
                    <span class="example-item">üåä</span>
                </div>
            </div>
        </div>

        <div class="property-demo">
            <div class="property-title">Solids KEEP their shape</div>
            <div class="demo-visual">
                <div class="demo-box">
                    <div class="visual">üß±‚û°Ô∏èü´ô</div>
                    <div class="label">A block stays a block!</div>
                </div>
            </div>
        </div>

        <div class="property-demo">
            <div class="property-title">Liquids CHANGE shape</div>
            <div class="demo-visual">
                <div class="demo-box">
                    <div class="visual">üíß‚û°Ô∏èü´ô = ü´ôüíß</div>
                    <div class="label">Water takes the jar's shape!</div>
                </div>
            </div>
        </div>

        <button class="next-btn" id="next1">Let's Sort!</button>
    </div>

    <div class="game-container hidden" id="activity2">
        <div class="activity-title">Sort the Items!</div>

        <p style="text-align: center; margin-bottom: 15px; color: #666;">
            Tap an item, then tap the correct bin to sort it!
        </p>

        <div class="items-to-sort" id="itemsToSort"></div>

        <div id="feedback2" class="feedback hidden"></div>

        <div class="sort-area">
            <div class="sort-bin solid" id="solidBin">
                <h3>üß± SOLIDS</h3>
                <div class="sort-bin-items" id="solidItems"></div>
            </div>
            <div class="sort-bin liquid" id="liquidBin">
                <h3>üíß LIQUIDS</h3>
                <div class="sort-bin-items" id="liquidItems"></div>
            </div>
        </div>

        <button class="next-btn hidden" id="next2">Continue</button>
    </div>

    <div class="game-container hidden" id="activity3">
        <div class="activity-title">Quick Quiz!</div>

        <div class="counter" id="quizCounter">Question 1 of 12</div>

        <div class="quiz-container">
            <div class="quiz-item" id="quizItem">ü™®</div>
            <div class="quiz-question">Is this a SOLID or a LIQUID?</div>

            <div class="quiz-options">
                <button class="quiz-btn solid" onclick="checkQuiz('solid')">üß± Solid</button>
                <button class="quiz-btn liquid" onclick="checkQuiz('liquid')">üíß Liquid</button>
            </div>
        </div>

        <div id="feedback3" class="feedback hidden"></div>
    </div>

    <div class="game-container hidden" id="activity4">
        <div class="activity-title">Properties Challenge!</div>

        <div class="counter" id="propCounter">Question 1 of 8</div>

        <div class="quiz-container">
            <div class="property-demo" id="propQuestion">
                <div class="property-title" id="propTitle">Which one can you POUR?</div>
            </div>

            <div class="quiz-options" id="propOptions"></div>
        </div>

        <div id="feedback4" class="feedback hidden"></div>
    </div>

    <div class="celebration" id="celebration">
        <div class="celebration-content">
            <div class="trophy">üß™</div>
            <h2>Super Scientist!</h2>
            <p style="font-size: 1.2em; margin-bottom: 20px;">You learned about Solids and Liquids!</p>
            <p style="font-size: 1.1em; color: #666;">Remember: Solids keep their shape, Liquids flow!</p>
            <button class="next-btn" onclick="location.reload()">Play Again</button>
        </div>
    </div>

    <script>
        let starsEarned = 0;
        let selectedItem = null;
        let sortedCount = 0;
        let quizRound = 0;
        let propRound = 0;

        const sortItems = [
            { emoji: 'ü™®', name: 'Rock', type: 'solid' },
            { emoji: 'ü•õ', name: 'Milk', type: 'liquid' },
            { emoji: 'üìö', name: 'Book', type: 'solid' },
            { emoji: 'üßÉ', name: 'Juice', type: 'liquid' },
            { emoji: 'üß∏', name: 'Teddy', type: 'solid' },
            { emoji: 'üíß', name: 'Water', type: 'liquid' },
            { emoji: 'üçé', name: 'Apple', type: 'solid' },
            { emoji: 'üçØ', name: 'Honey', type: 'liquid' },
            { emoji: 'üßä', name: 'Ice', type: 'solid' },
            { emoji: 'ü´ß', name: 'Soap', type: 'liquid' },
            { emoji: 'ü™ë', name: 'Chair', type: 'solid' },
            { emoji: 'ü•§', name: 'Soda', type: 'liquid' }
        ];

        const quizItems = [
            { emoji: 'ü™®', type: 'solid', name: 'rock' },
            { emoji: 'üåä', type: 'liquid', name: 'ocean' },
            { emoji: 'üß±', type: 'solid', name: 'brick' },
            { emoji: 'ü•§', type: 'liquid', name: 'soda' },
            { emoji: '‚úèÔ∏è', type: 'solid', name: 'pencil' },
            { emoji: 'ü´ß', type: 'liquid', name: 'soap' },
            { emoji: 'ü™ë', type: 'solid', name: 'chair' },
            { emoji: 'üß¥', type: 'liquid', name: 'lotion' },
            { emoji: 'üéæ', type: 'solid', name: 'ball' },
            { emoji: '‚òï', type: 'liquid', name: 'coffee' },
            { emoji: 'üîë', type: 'solid', name: 'key' },
            { emoji: 'üåßÔ∏è', type: 'liquid', name: 'rain' }
        ];

        const propQuestions = [
            { question: 'Which one can you POUR?', options: ['üß±', 'üíß'], answer: 'üíß' },
            { question: 'Which one keeps its SHAPE?', options: ['ü™®', 'ü•õ'], answer: 'ü™®' },
            { question: 'Which one FLOWS?', options: ['üìö', 'üßÉ'], answer: 'üßÉ' },
            { question: 'Which one can you STACK?', options: ['üíß', 'üß∏'], answer: 'üß∏' },
            { question: 'Which one takes the shape of its container?', options: ['üßä', 'üåä'], answer: 'üåä' },
            { question: 'Which one can you HOLD in your hand?', options: ['üçé', 'ü•õ'], answer: 'üçé' },
            { question: 'Which one would SPILL if you dropped it?', options: ['üìö', '‚òï'], answer: '‚òï' },
            { question: 'Which one stays the SAME shape?', options: ['üçØ', 'ü™ë'], answer: 'ü™ë' }
        ];

        function clearElement(element) {
            while (element.firstChild) {
                element.removeChild(element.firstChild);
            }
        }

        function playSound(type) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (type === 'tap') {
                oscillator.frequency.setValueAtTime(500, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(700, audioContext.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            } else if (type === 'success') {
                oscillator.frequency.setValueAtTime(523, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } else if (type === 'wrong') {
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } else if (type === 'star') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1760, audioContext.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            }
        }

        function updateProgress() {
            const progress = (starsEarned / 5) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function earnStar() {
            if (starsEarned < 5) {
                const stars = document.querySelectorAll('.star');
                stars[starsEarned].classList.add('earned');
                starsEarned++;
                playSound('star');
                updateProgress();
            }
        }

        function updateMascot(message) {
            document.getElementById('mascotSpeech').textContent = message;
        }

        function createConfetti() {
            const colors = ['#9c27b0', '#e91e63', '#2196f3', '#ff9800', '#4caf50', '#ffeb3b'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = '-10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        function showActivity(num) {
            document.querySelectorAll('.game-container').forEach(container => {
                container.classList.add('hidden');
            });
            document.getElementById('activity' + num).classList.remove('hidden');

            if (num === 2) initSorting();
            if (num === 3) initQuiz();
            if (num === 4) initProperties();
        }

        // Activity 2: Sorting
        function initSorting() {
            const container = document.getElementById('itemsToSort');
            clearElement(container);
            clearElement(document.getElementById('solidItems'));
            clearElement(document.getElementById('liquidItems'));
            sortedCount = 0;
            selectedItem = null;

            const shuffled = [...sortItems].sort(() => Math.random() - 0.5);

            shuffled.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'sort-item';
                div.dataset.type = item.type;
                div.dataset.index = index;

                const emoji = document.createElement('span');
                emoji.className = 'emoji';
                emoji.textContent = item.emoji;

                const name = document.createElement('span');
                name.className = 'name';
                name.textContent = item.name;

                div.appendChild(emoji);
                div.appendChild(name);

                div.addEventListener('click', () => selectItem(div, item));
                container.appendChild(div);
            });

            document.getElementById('solidBin').addEventListener('click', () => sortToBin('solid'));
            document.getElementById('liquidBin').addEventListener('click', () => sortToBin('liquid'));

            updateMascot('Tap an item, then tap the correct bin to sort it!');
        }

        function selectItem(element, item) {
            playSound('tap');
            document.querySelectorAll('.sort-item').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedItem = { element, item };
            updateMascot('Great! Now tap the SOLID or LIQUID bin!');
        }

        function sortToBin(binType) {
            if (!selectedItem) {
                updateMascot('First tap an item to select it!');
                return;
            }

            const feedback = document.getElementById('feedback2');

            if (selectedItem.item.type === binType) {
                playSound('success');
                const binItems = document.getElementById(binType + 'Items');
                const sorted = document.createElement('span');
                sorted.className = 'sorted-item';
                sorted.textContent = selectedItem.item.emoji;
                binItems.appendChild(sorted);

                selectedItem.element.remove();
                selectedItem = null;
                sortedCount++;

                feedback.textContent = 'Correct! ' + (binType === 'solid' ? 'Solids keep their shape!' : 'Liquids flow and pour!');
                feedback.className = 'feedback success';
                feedback.classList.remove('hidden');

                if (sortedCount >= sortItems.length) {
                    earnStar();
                    updateMascot('Amazing sorting! You know your solids and liquids!');
                    document.getElementById('next2').classList.remove('hidden');
                } else {
                    updateMascot('Great job! Keep sorting!');
                }
            } else {
                playSound('wrong');
                selectedItem.element.classList.remove('selected');
                selectedItem = null;
                feedback.textContent = 'Hmm, try again! Think about if it keeps its shape or flows.';
                feedback.className = 'feedback error';
                feedback.classList.remove('hidden');
            }

            setTimeout(() => feedback.classList.add('hidden'), 2000);
        }

        // Activity 3: Quiz
        function initQuiz() {
            quizRound = 0;
            showQuizQuestion();
        }

        function showQuizQuestion() {
            const item = quizItems[quizRound];
            document.getElementById('quizItem').textContent = item.emoji;
            document.getElementById('quizCounter').textContent = 'Question ' + (quizRound + 1) + ' of ' + quizItems.length;
            document.getElementById('feedback3').classList.add('hidden');

            document.querySelectorAll('.quiz-btn').forEach(btn => {
                btn.classList.remove('correct', 'wrong');
                btn.disabled = false;
            });

            updateMascot('Is this a solid or a liquid? Think about its shape!');
        }

        function checkQuiz(answer) {
            const item = quizItems[quizRound];
            const feedback = document.getElementById('feedback3');
            const buttons = document.querySelectorAll('.quiz-btn');

            buttons.forEach(btn => btn.disabled = true);

            if (answer === item.type) {
                playSound('success');
                document.querySelector('.quiz-btn.' + answer).classList.add('correct');
                const explanation = item.type === 'solid' ? 'It keeps its shape!' : 'It can flow and pour!';
                feedback.textContent = 'Yes! A ' + item.name + ' is a ' + item.type + '! ' + explanation;
                feedback.className = 'feedback success';
                feedback.classList.remove('hidden');

                quizRound++;
                if (quizRound >= quizItems.length) {
                    earnStar();
                    earnStar();
                    updateMascot('Excellent! You really understand solids and liquids!');
                    setTimeout(() => showActivity(4), 1500);
                } else {
                    setTimeout(showQuizQuestion, 1500);
                }
            } else {
                playSound('wrong');
                document.querySelector('.quiz-btn.' + answer).classList.add('wrong');
                feedback.textContent = 'Not quite! Try again!';
                feedback.className = 'feedback error';
                feedback.classList.remove('hidden');
                setTimeout(() => {
                    buttons.forEach(btn => {
                        btn.classList.remove('wrong');
                        btn.disabled = false;
                    });
                }, 1000);
            }
        }

        // Activity 4: Properties
        function initProperties() {
            propRound = 0;
            showPropQuestion();
        }

        function showPropQuestion() {
            const q = propQuestions[propRound];
            document.getElementById('propTitle').textContent = q.question;
            document.getElementById('propCounter').textContent = 'Question ' + (propRound + 1) + ' of ' + propQuestions.length;
            document.getElementById('feedback4').classList.add('hidden');

            const options = document.getElementById('propOptions');
            clearElement(options);

            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'quiz-btn';
                btn.style.fontSize = '3em';
                btn.style.padding = '20px 40px';
                btn.textContent = opt;
                btn.addEventListener('click', () => checkProp(opt, q.answer, btn));
                options.appendChild(btn);
            });

            updateMascot(q.question);
        }

        function checkProp(answer, correct, btn) {
            const feedback = document.getElementById('feedback4');

            if (answer === correct) {
                playSound('success');
                btn.classList.add('correct');
                feedback.textContent = 'Perfect! You understand the difference!';
                feedback.className = 'feedback success';
                feedback.classList.remove('hidden');

                propRound++;
                if (propRound >= propQuestions.length) {
                    earnStar();
                    createConfetti();
                    document.getElementById('celebration').classList.add('show');
                    playSound('success');
                } else {
                    setTimeout(showPropQuestion, 1500);
                }
            } else {
                playSound('wrong');
                btn.classList.add('wrong');
                feedback.textContent = 'Think again! Which one has that property?';
                feedback.className = 'feedback error';
                feedback.classList.remove('hidden');
                setTimeout(() => btn.classList.remove('wrong'), 500);
            }
        }

        // Event listeners
        document.getElementById('next1').addEventListener('click', () => {
            earnStar();
            showActivity(2);
        });

        document.getElementById('next2').addEventListener('click', () => {
            showActivity(3);
        });
    </script>
</body>
</html>
